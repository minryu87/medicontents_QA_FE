# 랜딩페이지 기능 구성 및 DB 연동

## 1. 랜딩페이지 개요

### 1.1 목적
- **서비스 소개**: MediContents QA 서비스의 가치 제안
- **신규 고객 유치**: 병원/의료기관 대상 마케팅
- **전환 유도**: 회원가입 및 문의 유도
- **사례 전시**: 성공 사례 및 샘플 콘텐츠 전시

### 1.2 대상 사용자
- **병원 관계자**: 마케팅 담당자, 원장, 실장
- **의료 마케팅 에이전시**: 콘텐츠 제작 대행사
- **일반 방문자**: 서비스 정보 탐색자

## 2. 페이지 구조 및 기능

### 2.1 페이지 구성
```
/ (메인 랜딩)
├── /features          # 기능 소개
├── /pricing          # 가격 정책
├── /samples          # 샘플 콘텐츠
├── /case-studies     # 성공 사례
├── /blog             # 공개 블로그 (생성된 콘텐츠)
├── /about            # 회사 소개
├── /contact          # 문의하기
├── /login            # 로그인
└── /signup           # 회원가입
```

### 2.2 주요 섹션별 기능

#### 2.2.1 히어로 섹션
```typescript
interface HeroSection {
  // 표시 데이터
  headline: string;              // "AI가 만드는 의료 콘텐츠, 의료법도 SEO도 완벽하게"
  subheadline: string;          // "매월 고품질 의료 콘텐츠를 자동으로 생성하고 관리하세요"
  
  // 통계 데이터 (DB 연동)
  stats: {
    totalPosts: number;         // blog_posts 테이블에서 published 상태 카운트
    activeHospitals: number;    // hospital_info 테이블에서 active 병원 수
    avgSeoScore: number;        // evaluation_results 평균 SEO 점수
    avgLegalScore: number;      // evaluation_results 평균 Legal 점수
  };
  
  // CTA 버튼
  primaryCTA: {
    text: string;               // "무료 체험 시작하기"
    link: string;               // "/signup"
  };
  secondaryCTA: {
    text: string;               // "샘플 콘텐츠 보기"
    link: string;               // "/samples"
  };
}
```

**DB 쿼리**:
```sql
-- 통계 데이터 조회
SELECT 
  (SELECT COUNT(*) FROM blog_posts WHERE status = 'published') as total_posts,
  (SELECT COUNT(*) FROM hospital_info WHERE is_active = true) as active_hospitals,
  (SELECT AVG(seo_score) FROM evaluation_results) as avg_seo_score,
  (SELECT AVG(medical_score) FROM evaluation_results) as avg_legal_score;
```

#### 2.2.2 기능 소개 섹션
```typescript
interface FeaturesSection {
  features: Feature[];
}

interface Feature {
  icon: string;
  title: string;
  description: string;
  benefits: string[];
  
  // 실시간 데이터 (선택적)
  stats?: {
    agentType: string;          // agent_type from agent_execution_logs
    avgExecutionTime: number;   // 평균 실행 시간
    successRate: number;        // 성공률
  };
}
```

**주요 기능**:
1. **AI 콘텐츠 생성**
   - 6개 AI 에이전트 협업
   - 자동 최적화 시스템
   - 실시간 처리 현황

2. **의료법 준수**
   - 15개 의료법 체크리스트
   - 실시간 검증
   - 자동 수정 시스템

3. **SEO 최적화**
   - 20개 SEO 체크리스트
   - 키워드 최적화
   - 메타데이터 자동 생성

4. **원스톱 관리**
   - 캠페인 관리
   - 일정 관리
   - 성과 분석

**DB 쿼리**:
```sql
-- 에이전트별 성능 통계
SELECT 
  agent_type,
  AVG(execution_time) as avg_execution_time,
  COUNT(CASE WHEN execution_status = 'completed' THEN 1 END)::float / COUNT(*) as success_rate
FROM agent_execution_logs
WHERE created_at > NOW() - INTERVAL '30 days'
GROUP BY agent_type;
```

#### 2.2.3 성공 사례 섹션
```typescript
interface CaseStudiesSection {
  caseStudies: CaseStudy[];
}

interface CaseStudy {
  id: number;
  hospitalName: string;         // hospital_info.name (익명화 가능)
  category: string;             // medical_services.category
  metrics: {
    beforeScore: number;        // 이전 SEO 점수
    afterScore: number;         // 개선된 SEO 점수
    postsCount: number;         // 생성된 포스트 수
    duration: string;           // 캠페인 기간
  };
  testimonial?: string;         // 고객 후기
  featuredPost?: {
    title: string;              // blog_posts.title
    excerpt: string;            // content_results에서 추출
    seoScore: number;          // evaluation_results.seo_score
    legalScore: number;        // evaluation_results.medical_score
  };
}
```

**DB 쿼리**:
```sql
-- 성공 사례 데이터 조회
SELECT 
  h.name as hospital_name,
  ms.category,
  COUNT(bp.id) as posts_count,
  AVG(er.seo_score) as avg_seo_score,
  AVG(er.medical_score) as avg_legal_score,
  MAX(er.seo_score) as max_seo_score
FROM hospital_info h
JOIN blog_posts bp ON h.id = bp.hospital_id
JOIN evaluation_results er ON bp.post_id = er.post_id
JOIN medical_services ms ON bp.medical_service_id = ms.id
WHERE bp.status = 'published'
  AND h.is_active = true
GROUP BY h.id, h.name, ms.category
HAVING COUNT(bp.id) >= 5
ORDER BY AVG(er.seo_score) DESC
LIMIT 6;
```

#### 2.2.4 샘플 콘텐츠 섹션
```typescript
interface SampleContentSection {
  categories: MedicalCategory[];
  samples: SamplePost[];
}

interface MedicalCategory {
  id: number;                   // medical_services.id
  name: string;                 // medical_services.category
  count: number;                // 해당 카테고리 샘플 수
}

interface SamplePost {
  postId: string;               // blog_posts.post_id
  title: string;                // blog_posts.title
  category: string;             // medical_services.category
  excerpt: string;              // 콘텐츠 일부 발췌
  scores: {
    seo: number;                // evaluation_results.seo_score
    legal: number;              // evaluation_results.medical_score
  };
  tags: string[];               // 주요 키워드
  createdAt: Date;             // blog_posts.created_at
}
```

**DB 쿼리**:
```sql
-- 카테고리별 샘플 포스트 조회
SELECT 
  bp.post_id,
  bp.title,
  ms.category,
  cr.assembled_html,
  er.seo_score,
  er.medical_score,
  bp.created_at
FROM blog_posts bp
JOIN medical_services ms ON bp.medical_service_id = ms.id
JOIN content_results cr ON bp.post_id = cr.post_id
JOIN evaluation_results er ON bp.post_id = er.post_id
WHERE bp.status = 'published'
  AND er.seo_score >= 80
  AND er.medical_score >= 85
ORDER BY er.seo_score DESC, er.medical_score DESC
LIMIT 12;
```

#### 2.2.5 가격 정책 섹션
```typescript
interface PricingSection {
  plans: PricingPlan[];
}

interface PricingPlan {
  name: string;                 // "스타터", "프로", "엔터프라이즈"
  price: number;                // 월 가격
  features: string[];           // 포함 기능
  limits: {
    postsPerMonth: number;      // 월 포스트 생성 수
    campaigns: number;          // 동시 캠페인 수
    users: number;              // 사용자 수
  };
  recommended?: boolean;        // 추천 플랜
}
```

### 2.3 공개 블로그 섹션 (/blog)

#### 2.3.1 블로그 목록 페이지
```typescript
interface BlogListPage {
  posts: PublishedPost[];
  categories: Category[];
  pagination: Pagination;
  filters: {
    category?: string;
    hospital?: string;
    dateRange?: DateRange;
  };
}

interface PublishedPost {
  postId: string;               // blog_posts.post_id
  title: string;                // blog_posts.title
  excerpt: string;              // 콘텐츠 요약
  hospital: {
    name: string;               // hospital_info.name
    logo?: string;              // hospital_info.business_card_image
  };
  category: string;             // medical_services.category
  treatment: string;            // medical_services.treatment
  publishedAt: Date;           // blog_posts.published_at
  readTime: number;             // 예상 읽기 시간
  imageUrl?: string;            // post_images 대표 이미지
}
```

**DB 쿼리**:
```sql
-- 공개 블로그 포스트 목록
SELECT 
  bp.post_id,
  bp.title,
  bp.published_at,
  h.name as hospital_name,
  h.business_card_image as hospital_logo,
  ms.category,
  ms.treatment,
  pi.file_url as image_url
FROM blog_posts bp
JOIN hospital_info h ON bp.hospital_id = h.id
JOIN medical_services ms ON bp.medical_service_id = ms.id
LEFT JOIN LATERAL (
  SELECT file_url 
  FROM post_images 
  WHERE post_id = bp.post_id 
    AND image_type = 'after'
  ORDER BY created_at DESC
  LIMIT 1
) pi ON true
WHERE bp.status = 'published'
  AND bp.published_at IS NOT NULL
ORDER BY bp.published_at DESC
LIMIT 20 OFFSET 0;
```

#### 2.3.2 블로그 상세 페이지
```typescript
interface BlogDetailPage {
  post: BlogPost;
  relatedPosts: RelatedPost[];
  hospital: HospitalInfo;
  seoMetadata: SEOMetadata;
}

interface BlogPost {
  postId: string;
  title: string;
  content: string;              // content_results.assembled_html
  images: PostImage[];          // post_images
  hospital: HospitalInfo;
  category: string;
  treatment: string;
  publishedAt: Date;
  readTime: number;
  
  // 구조화된 데이터 (SEO)
  structuredData: {
    "@type": "MedicalWebPage";
    "medicalSpecialty": string;
    "about": {
      "@type": "MedicalCondition";
      "name": string;
    };
    "mainEntity": {
      "@type": "MedicalProcedure";
      "name": string;
    };
  };
}
```

**DB 쿼리**:
```sql
-- 블로그 상세 조회
SELECT 
  bp.*,
  cr.assembled_html as content,
  h.name as hospital_name,
  h.address as hospital_address,
  h.phone as hospital_phone,
  h.website as hospital_website,
  ms.category,
  ms.treatment,
  ms.description as treatment_description
FROM blog_posts bp
JOIN content_results cr ON bp.post_id = cr.post_id
JOIN hospital_info h ON bp.hospital_id = h.id
JOIN medical_services ms ON bp.medical_service_id = ms.id
WHERE bp.post_id = $1
  AND bp.status = 'published';

-- 이미지 조회
SELECT 
  image_type,
  file_url,
  alt_text,
  description
FROM post_images
WHERE post_id = $1
  AND is_public = true
ORDER BY image_type, created_at;
```

### 2.4 전환 기능

#### 2.4.1 회원가입 유도
```typescript
interface SignupCTA {
  triggers: {
    scrollDepth: number;        // 스크롤 50% 도달 시
    timeOnPage: number;         // 30초 경과 시
    exitIntent: boolean;        // 페이지 이탈 의도 감지 시
  };
  
  popup: {
    title: string;
    benefits: string[];
    form: {
      email: string;
      hospitalName: string;
      role: string;             // "원장", "실장", "마케팅담당"
    };
  };
}
```

#### 2.4.2 문의하기
```typescript
interface ContactForm {
  formData: {
    name: string;
    email: string;
    phone: string;
    hospitalName: string;
    hospitalSize: string;       // "1-5명", "6-10명", "11명 이상"
    interests: string[];        // ["콘텐츠 자동화", "SEO 최적화", "의료법 검토"]
    message: string;
  };
  
  // DB 저장 (leads 테이블 - 신규)
  saveToDatabase: boolean;
  
  // 이메일 알림
  sendNotification: {
    to: string[];               // 관리자 이메일
    template: string;
  };
}
```

## 3. SEO 및 성능 최적화

### 3.1 SEO 최적화
```typescript
interface SEOOptimization {
  // 메타데이터
  metadata: {
    title: string;
    description: string;
    keywords: string[];
    ogImage: string;
    structuredData: object;
  };
  
  // 동적 사이트맵
  sitemap: {
    staticPages: string[];      // 정적 페이지
    blogPosts: string[];        // 동적 블로그 포스트
    lastModified: Date;
  };
  
  // robots.txt
  robots: {
    allow: string[];
    disallow: string[];
    sitemap: string;
  };
}
```

### 3.2 성능 최적화
```typescript
interface PerformanceOptimization {
  // 이미지 최적화
  images: {
    lazyLoading: boolean;
    webpFormat: boolean;
    responsive: boolean;
  };
  
  // 캐싱 전략
  caching: {
    staticAssets: string;       // "1 year"
    blogPosts: string;          // "1 hour"
    apiResponses: string;       // "5 minutes"
  };
  
  // 코드 최적화
  code: {
    bundleSplitting: boolean;
    treeShaking: boolean;
    minification: boolean;
  };
}
```

## 4. 분석 및 추적

### 4.1 사용자 행동 분석
```typescript
interface Analytics {
  // 페이지뷰 추적
  pageViews: {
    page: string;
    timestamp: Date;
    userAgent: string;
    referrer: string;
  };
  
  // 이벤트 추적
  events: {
    category: string;           // "CTA", "Form", "Scroll"
    action: string;             // "Click", "Submit", "Reach"
    label: string;              // "Hero CTA", "Contact Form"
    value?: number;
  };
  
  // 전환 추적
  conversions: {
    type: string;               // "Signup", "Contact", "Demo"
    source: string;             // 유입 경로
    timestamp: Date;
  };
}
```

## 5. 구현 우선순위

### Phase 1: 핵심 기능 (1주차)
1. 메인 랜딩 페이지 구조
2. 히어로 섹션 with 실시간 통계
3. 기능 소개 섹션
4. 공개 블로그 목록/상세

### Phase 2: 전환 기능 (2주차)
1. 회원가입 플로우
2. 문의하기 폼
3. CTA 팝업
4. 이메일 수집

### Phase 3: 콘텐츠 확장 (3주차)
1. 성공 사례 섹션
2. 샘플 콘텐츠 갤러리
3. 가격 정책 페이지
4. 회사 소개

### Phase 4: 최적화 (4주차)
1. SEO 최적화
2. 성능 최적화
3. 분석 도구 연동
4. A/B 테스트 설정

## 6. 기술 스택

### Frontend
- **Framework**: Next.js 14 (App Router)
- **Styling**: Tailwind CSS
- **Animation**: Framer Motion
- **Forms**: React Hook Form
- **Analytics**: Google Analytics 4

### Backend Integration
- **API**: RESTful API (/api/public/*)
- **Database**: PostgreSQL (읽기 전용 연결)
- **Caching**: Redis (공개 콘텐츠)
- **CDN**: CloudFront (정적 자산)

## 7. 보안 고려사항

### 7.1 공개 API 보안
```typescript
interface PublicAPISecurity {
  // Rate Limiting
  rateLimit: {
    windowMs: number;           // 15분
    maxRequests: number;        // 100회
  };
  
  // CORS 설정
  cors: {
    origins: string[];          // 허용된 도메인
    methods: string[];          // GET, POST
  };
  
  // 데이터 필터링
  dataFiltering: {
    hidePersonalInfo: boolean;  // 개인정보 제거
    anonymizeHospitals?: boolean; // 병원명 익명화 옵션
  };
}
```

### 7.2 데이터 보호
- 공개 API는 published 상태 콘텐츠만 노출
- 민감한 정보 (가격, 내부 메모 등) 제외
- 병원 정보는 공개 동의한 경우만 표시
- SQL Injection 방지
- XSS 방지

이 구성을 통해 효과적인 랜딩페이지를 구축하고, 실제 서비스 데이터를 활용한 신뢰성 있는 마케팅이 가능합니다.
