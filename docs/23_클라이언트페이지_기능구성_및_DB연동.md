# 클라이언트 페이지 기능 구성 및 DB 연동

## 1. 클라이언트 페이지 개요

### 1.1 목적
- **콘텐츠 생성 관리**: 자료 제공 및 콘텐츠 검토
- **캠페인 모니터링**: 진행 상황 실시간 확인
- **품질 관리**: AI 생성 콘텐츠 검토 및 승인
- **성과 분석**: 콘텐츠 성과 지표 확인

### 1.2 대상 사용자
- **병원 마케팅 담당자**: 주요 사용자
- **병원 관리자**: 승인 권한자
- **콘텐츠 담당자**: 자료 제공 및 검토

### 1.3 핵심 원칙
- **직관적 UX**: 의료 종사자도 쉽게 사용
- **모바일 대응**: 태블릿/모바일 최적화
- **실시간 피드백**: 즉각적인 상태 업데이트
- **데이터 보안**: 병원 정보 보호

## 2. 페이지 구조 및 기능

### 2.1 전체 페이지 구조
```
/client/
├── /dashboard              # 대시보드
├── /posts/                # 포스트 관리
│   ├── /                 # 포스트 목록
│   ├── /create           # 자료 제공 (POST 생성)
│   ├── /[id]/            # 포스트 상세
│   ├── /[id]/materials   # 자료 보기/수정
│   ├── /[id]/review      # 콘텐츠 검토
│   └── /[id]/history     # 수정 이력
├── /campaigns/            # 캠페인 현황
│   ├── /                 # 캠페인 목록
│   └── /[id]/            # 캠페인 상세
├── /analytics/            # 성과 분석
├── /profile/              # 병원 프로필
├── /settings/             # 설정
└── /notifications/        # 알림
```

## 3. 주요 기능별 상세 설계

### 3.1 대시보드 (/dashboard)

#### 3.1.1 대시보드 구성
```typescript
interface DashboardData {
  // 요약 통계
  summary: {
    totalPosts: number;         // 전체 포스트 수
    pendingActions: number;     // 대기 중인 작업
    thisMonthPosts: number;     // 이번 달 생성 포스트
    avgScores: {
      seo: number;              // 평균 SEO 점수
      legal: number;            // 평균 의료법 준수 점수
    };
  };
  
  // 진행 중인 포스트
  activePosts: {
    postId: string;
    title: string;
    status: PostStatus;
    requiredAction?: string;
    deadline?: Date;
  }[];
  
  // 최근 활동
  recentActivities: {
    type: ActivityType;
    description: string;
    timestamp: Date;
    postId?: string;
  }[];
  
  // 다가오는 일정
  upcomingSchedule: {
    postId: string;
    title: string;
    publishDate: Date;
    status: string;
  }[];
}
```

**DB 쿼리**:
```sql
-- 대시보드 요약 통계
WITH post_stats AS (
  SELECT 
    COUNT(*) as total_posts,
    COUNT(CASE WHEN status IN ('initial', 'client_review') THEN 1 END) as pending_actions,
    COUNT(CASE WHEN created_at >= DATE_TRUNC('month', CURRENT_DATE) THEN 1 END) as this_month_posts
  FROM blog_posts
  WHERE hospital_id = $1
),
score_stats AS (
  SELECT 
    AVG(er.seo_score) as avg_seo_score,
    AVG(er.medical_score) as avg_legal_score
  FROM evaluation_results er
  JOIN blog_posts bp ON er.post_id = bp.post_id
  WHERE bp.hospital_id = $1
)
SELECT * FROM post_stats, score_stats;

-- 진행 중인 포스트
SELECT 
  bp.post_id,
  bp.title,
  bp.status,
  CASE 
    WHEN bp.status = 'initial' THEN '자료 제공 필요'
    WHEN bp.status = 'client_review' THEN '검토 필요'
    ELSE NULL
  END as required_action,
  bp.campaign_target_date as deadline
FROM blog_posts bp
WHERE bp.hospital_id = $1
  AND bp.status NOT IN ('published', 'cancelled')
ORDER BY 
  CASE bp.status 
    WHEN 'client_review' THEN 1
    WHEN 'initial' THEN 2
    ELSE 3
  END,
  bp.created_at DESC
LIMIT 10;
```

#### 3.1.2 실시간 알림
```typescript
interface RealtimeNotifications {
  // WebSocket 연결
  connection: {
    endpoint: string;           // wss://api.medicontents.com/ws
    auth: string;               // JWT token
  };
  
  // 알림 타입
  notifications: {
    statusChange: {             // 포스트 상태 변경
      postId: string;
      oldStatus: string;
      newStatus: string;
      message: string;
    };
    reviewRequest: {            // 검토 요청
      postId: string;
      title: string;
      deadline?: Date;
    };
    agentComplete: {            // AI 처리 완료
      postId: string;
      agentType: string;
      success: boolean;
    };
  };
}
```

### 3.2 포스트 관리 (/posts)

#### 3.2.1 포스트 목록
```typescript
interface PostListData {
  posts: PostListItem[];
  filters: PostFilters;
  pagination: Pagination;
  stats: PostStats;
}

interface PostListItem {
  // 기본 정보
  postId: string;               // blog_posts.post_id
  title?: string;               // blog_posts.title
  status: PostStatus;           // blog_posts.status
  type: string;                 // blog_posts.post_type
  
  // 캠페인 정보
  campaign?: {
    id: number;                 // campaigns.id
    name: string;               // campaigns.name
  };
  
  // 진료 정보
  medicalService?: {
    category: string;           // medical_services.category
    treatment: string;          // medical_services.treatment
  };
  
  // 일정 정보
  dates: {
    created: Date;              // blog_posts.created_at
    targetPublish?: Date;       // blog_posts.campaign_target_date
    actualPublish?: Date;       // blog_posts.published_at
  };
  
  // 평가 점수
  scores?: {
    seo: number;                // evaluation_results.seo_score
    legal: number;              // evaluation_results.medical_score
  };
  
  // 액션 정보
  requiredAction?: {
    type: 'provide_materials' | 'review' | 'approve';
    deadline?: Date;
    priority: 'high' | 'medium' | 'low';
  };
}

interface PostFilters {
  status?: PostStatus[];
  campaign?: number;
  medicalService?: number;
  dateRange?: {
    from: Date;
    to: Date;
  };
  hasAction?: boolean;
}
```

**DB 쿼리**:
```sql
-- 포스트 목록 조회 (필터 적용)
SELECT 
  bp.post_id,
  bp.title,
  bp.status,
  bp.post_type,
  bp.created_at,
  bp.campaign_target_date,
  bp.published_at,
  c.id as campaign_id,
  c.name as campaign_name,
  ms.category as medical_category,
  ms.treatment as medical_treatment,
  er.seo_score,
  er.medical_score,
  CASE 
    WHEN bp.status = 'initial' THEN 'provide_materials'
    WHEN bp.status = 'client_review' THEN 'review'
    WHEN bp.status = 'admin_approved' THEN 'approve'
    ELSE NULL
  END as action_type
FROM blog_posts bp
LEFT JOIN campaigns c ON bp.campaign_id = c.id
LEFT JOIN medical_services ms ON bp.medical_service_id = ms.id
LEFT JOIN evaluation_results er ON bp.post_id = er.post_id
WHERE bp.hospital_id = $1
  AND ($2::text[] IS NULL OR bp.status = ANY($2))
  AND ($3::int IS NULL OR bp.campaign_id = $3)
  AND ($4::date IS NULL OR bp.created_at >= $4)
  AND ($5::date IS NULL OR bp.created_at <= $5)
ORDER BY 
  CASE 
    WHEN bp.status IN ('initial', 'client_review') THEN 0
    ELSE 1
  END,
  bp.created_at DESC
LIMIT $6 OFFSET $7;
```

#### 3.2.2 자료 제공 (/posts/create)
```typescript
interface MaterialsProvisionData {
  // 포스트 정보
  post: {
    postId: string;
    campaign?: Campaign;
    targetDate?: Date;
  };
  
  // 입력 폼 데이터
  formData: {
    // Step 1: 치료 정보
    treatment: {
      symptom: string;          // 선택된 증상
      procedure: string;        // 선택된 진료
      treatment: string;        // 선택된 치료
      toothNumbers?: string[];  // 치아 번호 (선택)
    };
    
    // Step 2: 페르소나
    persona: {
      representativePersona: string;  // 대표 페르소나
      personaCandidates?: string[];   // 추가 페르소나
    };
    
    // Step 3: 상세 내용
    content: {
      conceptMessage: string;         // 질환 개념 메시지
      patientCondition: string;       // 환자 상태
      treatmentProcess: string;       // 치료 과정
      treatmentResult: string;        // 치료 결과
      additionalMessage?: string;     // 추가 메시지
    };
    
    // Step 4: 이미지
    images: {
      before: File[];           // 치료 전 (최대 5장)
      process: File[];          // 치료 중 (최대 5장)
      after: File[];            // 치료 후 (최대 5장)
    };
  };
  
  // 자동 완성 데이터
  autoComplete: {
    symptoms: string[];         // symptom_procedure_treatment
    procedures: string[];       // symptom_procedure_treatment
    treatments: string[];       // symptom_procedure_treatment
    personas: PersonaStyle[];   // persona_style
  };
}
```

**DB 트랜잭션**:
```sql
-- 자료 제공 저장 트랜잭션
BEGIN;

-- 1. SPT 정보 저장
INSERT INTO spt_info (
  post_id, selected_symptom, selected_procedure, 
  selected_treatment, tooth_numbers
) VALUES ($1, $2, $3, $4, $5);

-- 2. 페르소나 정보 저장
INSERT INTO post_persona (
  post_id, representative_persona, persona_candidates
) VALUES ($1, $2, $3);

-- 3. 자료 정보 저장
INSERT INTO post_materials (
  post_id, concept_message, patient_condition,
  treatment_process_message, treatment_result_message,
  additional_message, status
) VALUES ($1, $2, $3, $4, $5, $6, 'completed');

-- 4. 이미지 저장 (각 이미지별)
INSERT INTO post_images (
  post_id, image_type, original_filename, stored_filename,
  file_path, file_url, file_size, mime_type, uploaded_by
) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9);

-- 5. 포스트 상태 업데이트
UPDATE blog_posts 
SET status = 'hospital_completed', updated_at = NOW()
WHERE post_id = $1;

-- 6. 상태 이력 기록
INSERT INTO post_status_history (
  post_id, old_status, new_status, changed_by
) VALUES ($1, 'initial', 'hospital_completed', $10);

COMMIT;
```

#### 3.2.3 콘텐츠 검토 (/posts/[id]/review)
```typescript
interface ContentReviewData {
  // 포스트 정보
  post: {
    postId: string;
    title: string;
    status: string;
  };
  
  // 생성된 콘텐츠
  content: {
    title: string;              // title_results.selected_title
    sections: Section[];        // content_results.sections
    html: string;               // content_results.assembled_html
    markdown: string;           // content_results.assembled_markdown
  };
  
  // 평가 결과
  evaluation: {
    seoScore: number;           // evaluation_results.seo_score
    legalScore: number;         // evaluation_results.medical_score
    seoChecklist: CheckItem[];  // evaluation_results.seo_checklist
    legalChecklist: CheckItem[]; // evaluation_results.medical_checklist
  };
  
  // 이미지
  images: {
    type: string;
    url: string;
    caption?: string;
  }[];
  
  // 검토 액션
  reviewActions: {
    approve: boolean;           // 승인 가능 여부
    requestRevision: boolean;   // 수정 요청 가능 여부
    directEdit: boolean;        // 직접 수정 가능 여부
  };
  
  // 수정 이력
  revisionHistory: {
    id: number;
    type: string;               // edit_results.edit_type
    reason: string;             // edit_results.edit_reason
    timestamp: Date;            // edit_results.created_at
    changes: any;               // edit_results.modified_content
  }[];
}

interface ReviewSubmission {
  action: 'approve' | 'revision';
  feedback?: string;            // 검토 의견
  revisionInstructions?: {      // 수정 지시사항
    targetSections: string[];   // 수정 대상 섹션
    specificInstructions: string; // 구체적 지시사항
  };
}
```

**DB 쿼리 및 트랜잭션**:
```sql
-- 검토용 콘텐츠 조회
SELECT 
  bp.post_id,
  bp.title,
  bp.status,
  tr.selected_title,
  cr.sections,
  cr.assembled_html,
  cr.assembled_markdown,
  er.seo_score,
  er.medical_score,
  er.seo_checklist,
  er.medical_checklist
FROM blog_posts bp
JOIN title_results tr ON bp.post_id = tr.post_id
JOIN content_results cr ON bp.post_id = cr.post_id
JOIN evaluation_results er ON bp.post_id = er.post_id
WHERE bp.post_id = $1
  AND bp.hospital_id = $2;

-- 검토 결과 저장
BEGIN;

-- 1. 검토 기록 저장
INSERT INTO client_reviews (
  post_id, client_id, review_status, review_notes, revision_instructions
) VALUES ($1, $2, $3, $4, $5);

-- 2. 수정 요청인 경우 EditAgent 트리거
IF $3 = 'revision_requested' THEN
  INSERT INTO agent_execution_logs (
    post_id, agent_type, execution_status, input_data
  ) VALUES ($1, 'edit', 'pending', $6);
END IF;

-- 3. 포스트 상태 업데이트
UPDATE blog_posts 
SET status = CASE 
  WHEN $3 = 'approved' THEN 'client_approved'
  WHEN $3 = 'revision_requested' THEN 'edit_requested'
END,
updated_at = NOW()
WHERE post_id = $1;

-- 4. 상태 이력 기록
INSERT INTO post_status_history (
  post_id, old_status, new_status, changed_by
) VALUES ($1, $7, $8, $2);

-- 5. 알림 생성
INSERT INTO notifications (
  user_id, post_id, notification_type, message
) VALUES ($9, $1, 'review_complete', $10);

COMMIT;
```

### 3.3 캠페인 관리 (/campaigns)

#### 3.3.1 캠페인 목록
```typescript
interface CampaignListData {
  campaigns: CampaignItem[];
  stats: CampaignStats;
}

interface CampaignItem {
  // 기본 정보
  id: number;                   // campaigns.id
  name: string;                 // campaigns.name
  status: string;               // campaigns.status
  
  // 기간 정보
  period: {
    startDate: Date;            // campaigns.start_date
    endDate: Date;              // campaigns.end_date
    remainingDays: number;      // 계산값
  };
  
  // 진행 상황
  progress: {
    targetPosts: number;        // campaigns.target_post_count
    completedPosts: number;     // campaigns.completed_post_count
    publishedPosts: number;     // campaigns.published_post_count
    progressRate: number;       // 계산값 (%)
  };
  
  // 품질 지표
  quality: {
    avgSeoScore: number;        // 평균 SEO 점수
    avgLegalScore: number;      // 평균 의료법 점수
  };
  
  // 다음 액션
  nextActions: {
    pendingMaterials: number;   // 자료 제공 대기
    pendingReviews: number;     // 검토 대기
  };
}
```

**DB 쿼리**:
```sql
-- 캠페인 목록 with 통계
SELECT 
  c.id,
  c.name,
  c.status,
  c.start_date,
  c.end_date,
  c.target_post_count,
  c.completed_post_count,
  c.published_post_count,
  c.end_date - CURRENT_DATE as remaining_days,
  COALESCE(AVG(er.seo_score), 0) as avg_seo_score,
  COALESCE(AVG(er.medical_score), 0) as avg_legal_score,
  COUNT(CASE WHEN bp.status = 'initial' THEN 1 END) as pending_materials,
  COUNT(CASE WHEN bp.status = 'client_review' THEN 1 END) as pending_reviews
FROM campaigns c
LEFT JOIN blog_posts bp ON c.id = bp.campaign_id
LEFT JOIN evaluation_results er ON bp.post_id = er.post_id
WHERE c.hospital_id = $1
GROUP BY c.id
ORDER BY c.status ASC, c.end_date ASC;
```

#### 3.3.2 캠페인 상세
```typescript
interface CampaignDetailData {
  campaign: Campaign;
  posts: CampaignPost[];
  timeline: TimelineEvent[];
  analytics: CampaignAnalytics;
}

interface CampaignPost {
  postId: string;
  title?: string;
  sequence: number;             // blog_posts.campaign_sequence
  status: string;
  targetDate: Date;
  actualDate?: Date;
  scores?: {
    seo: number;
    legal: number;
  };
}

interface TimelineEvent {
  date: Date;
  type: 'created' | 'post_added' | 'post_completed' | 'post_published';
  description: string;
  postId?: string;
}
```

### 3.4 성과 분석 (/analytics)

#### 3.4.1 성과 대시보드
```typescript
interface AnalyticsData {
  // 기간별 통계
  periodStats: {
    period: 'week' | 'month' | 'quarter' | 'year';
    metrics: {
      totalPosts: number;
      avgSeoScore: number;
      avgLegalScore: number;
      completionRate: number;   // 완료율
      approvalRate: number;     // 승인율
    };
    comparison: {              // 이전 기간 대비
      totalPosts: number;       // 증감률 (%)
      avgSeoScore: number;
      avgLegalScore: number;
    };
  };
  
  // 카테고리별 성과
  categoryPerformance: {
    category: string;           // medical_services.category
    postCount: number;
    avgSeoScore: number;
    avgLegalScore: number;
    topKeywords: string[];      // 상위 키워드
  }[];
  
  // AI 에이전트 성능
  agentPerformance: {
    agentType: string;
    avgExecutionTime: number;   // 평균 실행 시간
    successRate: number;        // 성공률
    errorRate: number;          // 오류율
  }[];
  
  // 콘텐츠 품질 추이
  qualityTrend: {
    date: Date;
    seoScore: number;
    legalScore: number;
    postCount: number;
  }[];
}
```

**DB 쿼리**:
```sql
-- 기간별 성과 통계
WITH current_period AS (
  SELECT 
    COUNT(*) as total_posts,
    AVG(er.seo_score) as avg_seo_score,
    AVG(er.medical_score) as avg_legal_score,
    COUNT(CASE WHEN bp.status = 'published' THEN 1 END)::float / 
      NULLIF(COUNT(*), 0) as completion_rate,
    COUNT(CASE WHEN bp.status IN ('client_approved', 'published') THEN 1 END)::float / 
      NULLIF(COUNT(CASE WHEN bp.status != 'initial' THEN 1 END), 0) as approval_rate
  FROM blog_posts bp
  LEFT JOIN evaluation_results er ON bp.post_id = er.post_id
  WHERE bp.hospital_id = $1
    AND bp.created_at >= $2  -- 기간 시작
    AND bp.created_at <= $3  -- 기간 종료
),
previous_period AS (
  -- 이전 기간 동일 쿼리
)
SELECT * FROM current_period, previous_period;

-- 카테고리별 성과
SELECT 
  ms.category,
  COUNT(*) as post_count,
  AVG(er.seo_score) as avg_seo_score,
  AVG(er.medical_score) as avg_legal_score
FROM blog_posts bp
JOIN medical_services ms ON bp.medical_service_id = ms.id
LEFT JOIN evaluation_results er ON bp.post_id = er.post_id
WHERE bp.hospital_id = $1
  AND bp.created_at >= $2
GROUP BY ms.category
ORDER BY post_count DESC;
```

### 3.5 병원 프로필 (/profile)

#### 3.5.1 프로필 관리
```typescript
interface HospitalProfileData {
  // 기본 정보
  hospital: {
    id: number;                 // hospital_info.id
    name: string;               // hospital_info.name
    address: string;            // hospital_info.address
    phone: string;              // hospital_info.phone
    website?: string;           // hospital_info.website
    description?: string;       // hospital_info.description
    businessCardImage?: string; // hospital_info.business_card_image
  };
  
  // 지역 정보
  region: {
    city: string;               // region_info.city
    district: string;           // region_info.district
    regionPhrase: string;       // region_info.region_phrase
  };
  
  // 제공 서비스
  services: {
    id: number;                 // medical_services.id
    category: string;           // medical_services.category
    treatment: string;          // medical_services.treatment
    description?: string;       // medical_services.description
    isActive: boolean;          // hospital_services 존재 여부
  }[];
  
  // 사용자 정보
  users: {
    id: number;                 // users.id
    username: string;           // users.username
    email: string;              // users.email
    role: string;               // users.role
    lastLogin?: Date;           // users.last_login
  }[];
}
```

**DB 쿼리 및 업데이트**:
```sql
-- 프로필 조회
SELECT 
  h.*,
  r.city,
  r.district,
  r.region_phrase
FROM hospital_info h
LEFT JOIN region_info r ON h.id = r.hospital_id
WHERE h.id = $1;

-- 프로필 업데이트
UPDATE hospital_info
SET 
  name = $2,
  address = $3,
  phone = $4,
  website = $5,
  description = $6,
  updated_at = NOW()
WHERE id = $1;

-- 서비스 업데이트
-- 1. 기존 서비스 삭제
DELETE FROM hospital_services WHERE hospital_id = $1;

-- 2. 새 서비스 추가
INSERT INTO hospital_services (hospital_id, medical_service_id)
SELECT $1, unnest($2::int[]);
```

## 4. 공통 컴포넌트 및 기능

### 4.1 실시간 상태 추적
```typescript
interface RealtimeTracking {
  // WebSocket 연결
  useRealtimeStatus(postId: string) {
    // 포스트 상태 실시간 추적
    // AI 에이전트 진행 상황
    // 평가 점수 업데이트
  }
  
  // 진행 상황 표시
  ProgressIndicator: {
    steps: Step[];
    currentStep: number;
    estimatedTime?: number;
  }
  
  interface Step {
    name: string;
    status: 'pending' | 'in_progress' | 'completed' | 'failed';
    startTime?: Date;
    endTime?: Date;
    details?: any;
  }
}
```

### 4.2 이미지 관리
```typescript
interface ImageManagement {
  // 이미지 업로드
  upload: {
    maxSize: 10 * 1024 * 1024;  // 10MB
    allowedTypes: ['image/jpeg', 'image/png', 'image/webp'];
    compression: {
      quality: 0.8;
      maxWidth: 1920;
      maxHeight: 1080;
    };
  };
  
  // 이미지 갤러리
  gallery: {
    layout: 'grid' | 'carousel';
    preview: boolean;
    zoom: boolean;
    download: boolean;
  };
  
  // 이미지 편집
  editor: {
    crop: boolean;
    rotate: boolean;
    annotate: boolean;          // 설명 추가
  };
}
```

### 4.3 알림 시스템
```typescript
interface NotificationSystem {
  // 알림 타입
  types: {
    statusChange: {             // 상태 변경
      icon: 'status';
      priority: 'normal';
    };
    reviewRequest: {            // 검토 요청
      icon: 'review';
      priority: 'high';
    };
    deadline: {                 // 마감 임박
      icon: 'calendar';
      priority: 'urgent';
    };
    completion: {               // 완료
      icon: 'check';
      priority: 'normal';
    };
  };
  
  // 알림 설정
  preferences: {
    email: boolean;             // 이메일 알림
    push: boolean;              // 푸시 알림
    inApp: boolean;             // 앱 내 알림
    frequency: 'instant' | 'daily' | 'weekly';
  };
}
```

## 5. 성능 및 사용성 최적화

### 5.1 성능 최적화
```typescript
interface PerformanceOptimization {
  // 데이터 캐싱
  caching: {
    strategy: 'memory' | 'localStorage' | 'sessionStorage';
    ttl: number;                // Time to live
    keys: string[];             // 캐시할 데이터 키
  };
  
  // 지연 로딩
  lazyLoading: {
    images: boolean;
    components: boolean;
    routes: boolean;
  };
  
  // 무한 스크롤
  infiniteScroll: {
    pageSize: 20;
    prefetch: 2;                // 미리 로드할 페이지 수
  };
}
```

### 5.2 사용성 최적화
```typescript
interface UsabilityOptimization {
  // 자동 저장
  autoSave: {
    enabled: boolean;
    interval: 30;               // 초
    drafts: boolean;            // 임시저장 지원
  };
  
  // 단축키
  shortcuts: {
    save: 'Ctrl+S';
    submit: 'Ctrl+Enter';
    cancel: 'Esc';
  };
  
  // 툴팁 및 가이드
  guidance: {
    tooltips: boolean;
    onboarding: boolean;
    contextualHelp: boolean;
  };
  
  // 접근성
  accessibility: {
    keyboardNavigation: boolean;
    screenReader: boolean;
    highContrast: boolean;
  };
}
```

## 6. 보안 및 권한 관리

### 6.1 권한 체계
```typescript
interface PermissionSystem {
  // 역할별 권한
  roles: {
    admin: {                    // 병원 관리자
      posts: ['create', 'read', 'update', 'delete', 'approve'];
      users: ['create', 'read', 'update', 'delete'];
      settings: ['read', 'update'];
    };
    manager: {                  // 마케팅 담당자
      posts: ['create', 'read', 'update', 'approve'];
      users: ['read'];
      settings: ['read'];
    };
    staff: {                    // 일반 직원
      posts: ['create', 'read'];
      users: [];
      settings: [];
    };
  };
  
  // 데이터 접근 제어
  dataAccess: {
    ownHospitalOnly: boolean;   // 자기 병원 데이터만
    sensitiveFields: string[];  // 민감 정보 필드
  };
}
```

### 6.2 보안 기능
```typescript
interface SecurityFeatures {
  // 세션 관리
  session: {
    timeout: 30 * 60;           // 30분
    refreshToken: boolean;
    multiDevice: boolean;
  };
  
  // 2단계 인증
  twoFactor: {
    enabled: boolean;
    methods: ['sms', 'email', 'app'];
  };
  
  // 감사 로그
  auditLog: {
    actions: ['login', 'logout', 'create', 'update', 'delete', 'approve'];
    retention: 90;              // 일
  };
}
```

## 7. 구현 우선순위

### Phase 1: 핵심 워크플로우 (1-2주)
1. 대시보드 구현
2. 포스트 목록 및 상세
3. 자료 제공 폼
4. 콘텐츠 검토 기능

### Phase 2: 캠페인 관리 (3주차)
1. 캠페인 목록
2. 캠페인 상세 및 타임라인
3. 일정 관리
4. 진행 상황 추적

### Phase 3: 분석 및 보고 (4주차)
1. 성과 분석 대시보드
2. 보고서 생성
3. 데이터 내보내기
4. 인사이트 제공

### Phase 4: 고급 기능 (5-6주)
1. 실시간 알림
2. 협업 기능
3. 모바일 최적화
4. 고급 필터 및 검색

## 8. 기술 스택

### Frontend
- **Framework**: Next.js 14 (App Router)
- **State**: Zustand + React Query
- **UI**: Radix UI + Tailwind CSS
- **Charts**: Recharts
- **Forms**: React Hook Form + Zod
- **Realtime**: Socket.io Client

### API Integration
- **Client**: Axios with interceptors
- **Auth**: JWT with refresh token
- **Cache**: React Query cache
- **Error**: Global error boundary

## 9. 모바일 대응

### 9.1 반응형 디자인
```typescript
interface ResponsiveDesign {
  breakpoints: {
    mobile: '640px';            // sm
    tablet: '768px';            // md
    desktop: '1024px';          // lg
  };
  
  layouts: {
    mobile: 'single-column';
    tablet: 'two-column';
    desktop: 'multi-column';
  };
  
  features: {
    touch: boolean;             // 터치 제스처
    swipe: boolean;             // 스와이프 네비게이션
    pullToRefresh: boolean;     // 당겨서 새로고침
  };
}
```

### 9.2 PWA 지원
```typescript
interface PWASupport {
  manifest: {
    name: 'MediContents Client';
    shortName: 'MC Client';
    theme: '#0066CC';
    background: '#FFFFFF';
  };
  
  offline: {
    strategy: 'cache-first';
    pages: ['/dashboard', '/posts'];
    assets: ['icons', 'fonts'];
  };
  
  pushNotifications: boolean;
}
```

이 구성을 통해 클라이언트가 효율적으로 콘텐츠를 관리하고, AI 생성 결과를 검토하며, 전체적인 캠페인 진행 상황을 모니터링할 수 있습니다.
