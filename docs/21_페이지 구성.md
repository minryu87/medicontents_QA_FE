## 전체 서비스 플로우 및 화면 구성

### 1. 공개 페이지 (인증 불필요)

#### 1.1 랜딩 페이지 (`/`)
```
화면 구성:
├── 서비스 소개
├── 주요 기능 (AI 콘텐츠 생성, 의료법 준수, SEO 최적화)
├── 고객 사례
├── 가격 플랜
└── 로그인/회원가입 버튼

활동:
- 방문자: 서비스 정보 확인 → 회원가입 결정
```

#### 1.2 게시판 페이지 (`/blog`)
```
화면 구성:
├── 게시된 포스트 목록 (카드 형식)
├── 카테고리 필터 (진료과목별)
├── 검색 기능
├── 포스트 상세 보기
└── 병원 정보 표시

활동:
- 일반 사용자: 의료 정보 검색 및 열람
- SEO 크롤러: 콘텐츠 인덱싱
```

### 2. 시스템 초기 설정 플로우

#### 2.1 어드민 사전 준비 단계

**Step 1: 시스템 기본 데이터 설정**
```
화면: /admin/settings/basic-data
활동:
[어드민]
├── medical_services 테이블 설정
│   └── 증상 → 진료 → 치료 매핑 데이터 입력
├── persona_style 테이블 설정
│   └── 포스팅 대상이 되는 진료 서비스별 페르소나 유형별 스타일 정의
├── clinical_context 테이블 설정
│   └── 임상 컨텍스트 데이터 입력
└── symptom_procedure_treatment 자동 생성
    └── 클러스터링을 통한 키워드 테이블 생성

상태: 시스템 기본 데이터 준비 완료
```

**Step 2: 프롬프트 및 체크리스트 설정**
```
화면: /admin/settings/prompts, /admin/settings/checklists
활동:  포스팅 유형(유입/전환), 포스팅 채널(비로그인/로그인)에 따라 맞춤형 준비
[어드민]
├── 각 에이전트별 프롬프트 등록
│   ├── InputAgent 프롬프트
│   ├── PlanAgent 프롬프트
│   ├── TitleAgent 프롬프트
│   ├── ContentAgent 프롬프트
│   ├── EvaluationAgent 프롬프트
│   └── EditAgent 프롬프트
└── 평가 체크리스트 설정
    ├── SEO 체크리스트
    ├── Legal 체크리스트
│   └── Medical 체크리스트
상태: 시스템 준비 완료
```

### 3. 병원 온보딩 플로우

#### 3.1 클라이언트 회원가입
```
화면: /signup → /client/onboarding
활동:
[클라이언트]
├── 회원가입 정보 입력
│   ├── 계정 정보 (이메일, 비밀번호)
│   ├── 병원 기본 정보
│   │   ├── 병원명, 대표자명
│   │   ├── 사업자등록번호
│   │   └── 연락처
│   └── 이용약관 동의
├── 이메일 인증
└── 병원 상세 정보 입력
    ├── 주소 (지역 정보 자동 파싱)
    ├── 홈페이지 URL
    ├── 진료 과목 선택
    └── 제공 서비스 선택

[시스템]
├── hospital_info 테이블 생성
├── users 테이블 생성
├── hospital_services 매핑
└── region_info 자동 추출

상태: hospital_registered
```

### 4. 캠페인 및 포스트 생성 플로우

#### 4.1 캠페인 생성
```
화면: /admin/campaigns/create
활동:
[어드민]
├── 캠페인 기본 정보 입력
│   ├── 캠페인명
│   ├── 대상 병원 선택
│   ├── 기간 설정 (시작일/종료일)
│   └── 목표 포스트 수
└── 캠페인 서비스 매핑
    └── 포함할 medical_services 선택

[시스템]
├── campaigns 테이블 생성
├── campaign_services 매핑
└── campaign_status_history 기록

상태: campaign_created
```

#### 4.2 포스트 생성 (어드민)
```
화면: /admin/posts/create
활동:
[어드민]
├── 포스트 기본 정보 설정
│   ├── 캠페인 선택
│   ├── 포스트 타입 (전환/유입)
│   ├── 게시 예정일 설정
│   └── 우선순위 설정
└── 병원에 자료 제공 요청

[시스템]
├── blog_posts 생성 (status: initial)
├── post_materials 생성 (status: pending)
├── publish_schedules 설정
└── 병원에 알림 발송

상태: blog_posts.status = initial
```

### 5. 자료 제공 플로우

#### 5.1 병원 자료 제공
```
화면: /client/posts/create
활동:
[클라이언트]
├── 알림 확인 → 자료 제공 페이지 진입
├── 치료 정보 선택
│   ├── 증상/진료/치료 선택
│   └── 치아 번호 선택 (선택적)
├── 페르소나 선택
│   └── 대표 페르소나 유형 선택
├── 상세 내용 입력
│   ├── 질환 개념 메시지
│   ├── 환자 상태
│   ├── 치료 과정
│   ├── 치료 결과
│   └── 추가 메시지
└── 이미지 업로드
    ├── 치료 전 (최대 5장)
    ├── 치료 과정 (최대 5장)
    └── 치료 후 (최대 5장)

[시스템]
├── treatment_info 저장
├── post_persona 저장
├── post_materials 업데이트 (status: completed)
├── post_images 저장 (클라우드)
└── post_persona_mapping 자동 생성

상태: blog_posts.status = hospital_completed
```

#### 5.2 어드민 키워드 가이드 입력
```
화면: /admin/posts/{id}/keywords
활동:
[어드민]
├── 키워드 가이드 입력
│   ├── 지역 키워드
│   ├── 병원 키워드
│   ├── 증상 키워드
│   ├── 진단 키워드
│   ├── 치료 키워드
│   └── 타겟 키워드
└── 작성 가이드 입력

[시스템]
└── post_keywords_guide 저장

상태: blog_posts.status = guide_completed
```

### 6. AI 에이전트 처리 플로우

```
화면: /admin/posts/{id}/processing (모니터링 화면)
활동:
[어드민] 처리 상태 모니터링

[AI 에이전트 자동 실행]
├── DataAggregationService
│   ├── Redis 캐시 확인
│   ├── 완전한 데이터 조회
│   └── 캐시 저장 (TTL: 10분)
│
├── InputAgent (100ms)
│   ├── 데이터 검증
│   ├── 이미지 URL 처리
│   └── 임상 컨텍스트 빌딩
│
├── PlanAgent (2-3초)
│   ├── 콘텐츠 구조 계획
│   └── 섹션별 작성 지침
│
├── TitleAgent (1-2초)
│   ├── 제목 후보 생성
│   └── 최적 제목 선택
│
├── ContentAgent (5-10초)
│   ├── 섹션별 콘텐츠 생성
│   ├── 이미지 삽입
│   └── HTML 변환
│
├── EvaluationAgent (3-5초)
│   ├── SEO 평가 (목표: 70점 이상)
│   ├── Legal 평가 (목표: 80점 이상)
│   └── 임계점 확인
│
└── EditAgent (조건부 실행)
    └── 평가 미달 시 자동 수정

[시스템]
├── agent_execution_logs 실시간 기록
├── AgentResult 저장 (PostgreSQL + Redis)
└── 타임아웃 관리 (2시간)

상태: blog_posts.status = agent_completed
```

### 7. 검토 및 수정 플로우

#### 7.1 어드민 검토
```
화면: /admin/posts/{id}/review
활동:
[어드민]
├── 콘텐츠 검토
│   ├── HTML 미리보기
│   ├── SEO 점수 확인
│   └── Legal 점수 확인
├── 수정 결정
│   ├── Case 1: 승인
│   └── Case 2: 수정 지시
│       └── EditAgent 호출 (수정 지시사항 전달)
└── 어드민 승인

[EditAgent - 수정 요청 시]
├── 수정 지시사항 분석
├── 해당 섹션 수정
└── 수정 결과 저장

상태: blog_posts.status = admin_approved
```

#### 7.2 클라이언트 검토
```
화면: /client/posts/{id}/review
활동:
[클라이언트]
├── 콘텐츠 최종 검토
│   ├── 내용 정확성 확인
│   ├── 이미지 확인
│   └── 병원 정보 확인
├── 검토 결정
│   ├── Case 1: 승인
│   └── Case 2: 수정 요청
│       └── 구체적 수정사항 작성
└── 클라이언트 승인

[EditAgent - 수정 요청 시]
├── 클라이언트 요청 처리
├── 수정 실행
└── 수정 이력 저장

상태: blog_posts.status = client_approved
```

### 8. 최종 승인 및 게시 플로우

#### 8.1 어드민 최종 수정
```
화면: /admin/posts/{id}/final-edit
활동:
[어드민]
├── 최종 검토
├── 필요시 직접 수정
│   └── 마크다운 에디터에서 직접 편집
└── 최종 승인

상태: blog_posts.status = final_revision
```

#### 8.2 자동 게시
```
화면: /blog/{post-slug} (공개 페이지)
활동:
[시스템 - 스케줄러]
├── 게시 시간 확인
├── HTML 콘텐츠 게시
├── SEO 메타데이터 설정
└── 사이트맵 업데이트

[시스템]
├── blog_posts.status = published
├── publish_history 기록
└── 관련자 알림 발송

상태: 게시 완료
```

### 9. 모니터링 대시보드

#### 9.1 어드민 대시보드
```
화면: /admin/dashboard
표시 정보:
├── 실시간 처리 현황
├── 에이전트별 성능 지표
├── 품질 점수 통계
└── 오류/경고 알림
```

#### 9.2 클라이언트 대시보드
```
화면: /client/dashboard
표시 정보:
├── 내 포스트 현황
├── 검토 대기 항목
├── 게시 예정 포스트
└── 성과 지표
```

이 플로우는 각 참여자의 역할과 책임을 명확히 하면서, 자동화된 AI 처리와 인간의 검토가 균형있게 결합된 구조입니다. 각 단계마다 상태 변경이 자동으로 기록되어 전체 프로세스의 투명성과 추적 가능성을 보장합니다.

---

## 10. 사용자 활동 중심 페이지 가이드

기존 서비스 플로우를 보완하여 각 페이지에서 사용자가 수행하는 구체적인 활동을 중심으로 정리합니다.

### 10.1 어드민 페이지 활동 가이드

#### 시스템 초기 설정 단계
**(/admin/setup/basic-data, /admin/setup/prompts)**
```
어드민의 시스템 구축 및 데이터 준비 작업
├── 데이터베이스 초기화 및 기본 테이블 설정
├── 의료 데이터 구축 (medical_services, clinical_context 등)
├── AI 에이전트 프롬프트 및 체크리스트 구성
└── 시스템 파라미터 및 품질 기준 설정
```

**주요 활동별 페이지 이동**:
- **테이블 관리**: `/admin/database/tables` → CRUD 인터페이스
- **프롬프트 편집**: `/admin/agents/prompts` → 실시간 에디터
- **데이터 검증**: `/admin/database/validation` → 품질 검사 도구

#### 캠페인 및 포스트 생성
**(/admin/campaigns/create, /admin/posts/create)**
```
어드민의 마케팅 전략 수립 및 콘텐츠 기획
├── 캠페인 목표 설정 및 타겟 병원 선정
├── 콘텐츠 믹스 결정 (유입/전환 포스팅 비율)
├── AI 에이전트 실행 조건 및 품질 기준 지정
└── 검토 일정 및 승인 프로세스 설정
```

**주요 활동별 페이지 이동**:
- **병원 선택**: `/admin/hospitals` → 캠페인 대상 선택
- **키워드 리서치**: `/admin/tools/keyword-research` → SEO 분석
- **템플릿 선택**: `/admin/templates` → 포스트 유형 템플릿

#### AI 생성 모니터링
**(/admin/posts/{id}/processing)**
```
어드민의 AI 콘텐츠 생성 실시간 감독
├── 7개 에이전트 진행 상태 및 예상 완료 시간 확인
├── 각 단계별 출력 결과 검토 및 품질 평가
├── 에러 발생 시 원인 분석 및 복구 전략 결정
└── 필요시 파라미터 조정 또는 수동 개입
```

**주요 활동별 페이지 이동**:
- **상세 로그**: `/admin/posts/{id}/logs` → 실행 로그 조회
- **성능 분석**: `/admin/agents/performance` → 메트릭 모니터링
- **디버깅 도구**: `/admin/tools/debug` → 문제 해결

#### 콘텐츠 검토 및 승인
**(/admin/posts/{id}/review, /admin/posts/{id}/final-edit)**
```
어드민의 전략적 콘텐츠 검증 및 최종 마무리
├── HTML 미리보기, SEO/Legal 점수 종합 평가
├── 체크리스트 기반 세부 항목 검증
├── 승인/수정/거부 전략 결정 및 구체적 지시 작성
├── 필요시 마크다운 에디터로 직접 수정
└── 게시 일정 및 채널 배분 최종 결정
```

**주요 활동별 페이지 이동**:
- **비교 도구**: 사이드바이사이드 비교 인터페이스
- **편집 에디터**: `/admin/editor/{id}` → 리치 텍스트 에디터
- **미리보기**: `/admin/preview/{id}` → 실제 표시 상태 확인

#### 고객 관리 및 지원
**(/admin/hospitals, /admin/support/tickets)**
```
어드민의 고객 생애주기 관리 및 기술 지원
├── 병원 계정 생성 및 권한 설정
├── 티켓 분류 및 우선순위 설정
├── 실시간 채팅 또는 화상 지원
└── 교육 자료 및 컨설팅 제공
```

#### 시스템 모니터링 및 최적화
**(/admin/dashboard, /admin/system/health)**
```
어드민의 시스템 건강 상태 및 성능 관리
├── 실시간 AI 파이프라인 상태 모니터링
├── 서버/데이터베이스/캐시 성능 추적
├── 에러율 및 응답 시간 모니터링
└── 자동화된 경고 및 알림 처리
```

### 10.2 클라이언트 페이지 활동 가이드

#### 계정 설정 및 온보딩
**(/signup, /client/onboarding)**
```
병원 담당자의 서비스 가입 및 초기 설정
├── 이메일 계정 생성 및 인증
├── 병원 기본 정보 및 연락처 입력
├── 진료 과목 및 서비스 항목 선택
├── 지역 정보 설정 및 마케팅 타겟팅
└── 프로필 완성 (로고, 브랜드 컬러)
```

**주요 활동별 페이지 이동**:
- **서비스 선택**: 계층적 드롭다운 메뉴
- **주소 입력**: Google Places API 자동 완성
- **설정 검토**: 요약 페이지에서 최종 확인

#### 자료 제공 및 콘텐츠 준비
**(/client/posts/create)**
```
병원 담당자의 치료 사례 기반 콘텐츠 자료 준비
├── 대시보드 또는 이메일 알림을 통한 요청 확인
├── 기존 환자 치료 기록에서 대표 사례 선정
├── 증상-진단-치료 과정 체계적 구조화
├── Before/After 이미지 및 성과 지표 준비
├── 페르소나 선택 및 추가 컨텍스트 입력
└── 최종 검토 후 AI 생성 요청 제출
```

**주요 활동별 페이지 이동**:
- **사례 검색**: `/client/cases` → 치료 기록 데이터베이스
- **이미지 업로드**: 드래그 앤 드롭 인터페이스
- **자동 완성**: symptom_procedure_treatment 기반 보조

#### 콘텐츠 검토 및 승인
**(/client/reviews)**
```
병원 담당자의 최종 콘텐츠 승인 및 브랜드 검증
├── 병원명/의사명/시설 정보 정확성 확인
├── 치료 과정 및 결과 설명의 사실성 검증
├── 이미지 품질 및 레이아웃 평가
├── 잠재 고객에게 주는 신뢰도 판단
├── 승인/수정 요청/거부 결정 및 피드백 작성
└── 의료법 준수도 및 정보 유출 리스크 점검
```

**주요 활동별 페이지 이동**:
- **브랜드 검증**: `/client/tools/brand-check` → 자동 검사
- **다중 디바이스 미리보기**: 반응형 확인
- **피드백 템플릿**: 표준화된 수정 요청 양식

#### 성과 모니터링 및 분석
**(/client/dashboard, /client/analytics)**
```
병원 담당자의 마케팅 성과 추적 및 개선
├── 포스트별 조회수, 전환율, SEO 순위 모니터링
├── 캠페인별 ROI 및 목표 달성도 분석
├── 콘텐츠 패턴 분석 및 개선 포인트 도출
└── 경쟁사 비교 및 벤치마킹
```

### 10.3 크로스 페이지 공통 활동

#### 실시간 알림 및 커뮤니케이션
```
├── WebSocket 기반 실시간 상태 업데이트
├── 푸시 알림, 이메일, 인앱 알림 설정
├── 어드민-클라이언트 간 메시지 송수신
└── 알림 히스토리 및 읽음 상태 관리
```

#### 검색 및 필터링
```
├── 글로벌 검색 바를 통한 전체 데이터 검색
├── 고급 필터 (상태, 날짜, 카테고리 등)
├── 저장된 필터 세트 관리
└── 검색 결과 북마크 및 공유
```

#### 데이터 내보내기 및 보고
```
├── 포스트, 캠페인, 성과 데이터 CSV/Excel 내보내기
├── PDF 보고서 자동 생성
├── 대시보드 스크린샷 및 공유
└── 예약된 보고서 이메일 발송 설정
```

이 가이드는 기존 서비스 플로우를 보완하여 각 페이지에서 사용자가 실제로 수행하는 구체적인 활동을 중심으로 정리하였습니다. 이를 통해 UI/UX 설계 시 사용자 중심의 인터페이스를 구축할 수 있습니다.