import { useState, useEffect } from 'react';
import { adminApi } from '@/services/api';
import type { CompletePostingWorkflow } from '@/types/common';

interface Post {
  id: string;
  post_id: string;
  title: string;
  status: string;
  post_type: string;
  publish_date?: string;
  created_at?: string;
  creator_name?: string;
}

interface PostingWorkTabProps {
  posts?: Post[];
  isLoading?: boolean;
  selectedHospitalId?: number;
  onPostSelect?: (post: Post | null) => void;
  selectedPost?: Post | null;
}

export default function PostingWorkTab({
  posts = [],
  isLoading = false,
  selectedHospitalId,
  onPostSelect,
  selectedPost
}: PostingWorkTabProps) {
  console.log('PostingWorkTab posts:', posts);
  console.log('PostingWorkTab posts length:', posts?.length);
  console.log('PostingWorkTab isLoading:', isLoading);
  const [activeStep, setActiveStep] = useState<string>('material-review');
  const [isWorking, setIsWorking] = useState(false);
  const [guideText, setGuideText] = useState('');
  const [publishDate, setPublishDate] = useState('');
  const [publishTime, setPublishTime] = useState('');

  const steps = [
    { id: 'material-review', label: 'ìë£Œ ê²€í† ', icon: 'ğŸ“‹' },
    { id: 'admin-guide', label: 'ê°€ì´ë“œ ì œê³µ', icon: 'ğŸ“–' },
    { id: 'ai-agent', label: 'AI ìƒì„±', icon: 'ğŸ¤–' },
    { id: 'result-review', label: 'ê²°ê³¼ ê²€í† ', icon: 'ğŸ‘ï¸' },
    { id: 'client-review', label: 'í´ë¼ì´ì–¸íŠ¸ ê²€í† ', icon: 'ğŸ‘¤' },
    { id: 'publish-ready', label: 'ê²Œì‹œ ëŒ€ê¸°', icon: 'ğŸš€' }
  ];

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'initial': return 'bg-gray-100 text-gray-800';
      case 'material_completed': return 'bg-blue-100 text-blue-800';
      case 'guide_completed': return 'bg-green-100 text-green-800';
      case 'agent_processing': return 'bg-yellow-100 text-yellow-800';
      case 'agent_completed': return 'bg-purple-100 text-purple-800';
      case 'admin_review': return 'bg-orange-100 text-orange-800';
      case 'client_review': return 'bg-pink-100 text-pink-800';
      case 'final_revision': return 'bg-indigo-100 text-indigo-800';
      case 'publish_scheduled': return 'bg-emerald-100 text-emerald-800';
      default: return 'bg-gray-100 text-gray-800';
    }
  };

  // ìë£Œ ê²€í†  ìŠ¹ì¸
  const approveMaterials = async () => {
    if (!selectedPost) return;
    setIsWorking(true);
    try {
      await adminApi.updatePostMaterialsStatus(selectedPost.post_id, 'completed');
      await adminApi.updatePostStatus(selectedPost.post_id, 'material_completed', 'ìë£Œ ê²€í†  ìŠ¹ì¸');
      alert('ìë£Œê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
      setActiveStep('admin-guide');
    } catch (error) {
      console.error('ìë£Œ ìŠ¹ì¸ ì‹¤íŒ¨:', error);
      alert('ìë£Œ ìŠ¹ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsWorking(false);
    }
  };

  // ìë£Œ ê²€í†  ë°˜ë ¤
  const rejectMaterials = async () => {
    if (!selectedPost) return;
    setIsWorking(true);
    try {
      await adminApi.updatePostStatus(selectedPost.post_id, 'initial', 'ìë£Œ ê²€í†  ë°˜ë ¤ - ìˆ˜ì • í•„ìš”');
      alert('ìë£Œê°€ ë°˜ë ¤ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } catch (error) {
      console.error('ìë£Œ ë°˜ë ¤ ì‹¤íŒ¨:', error);
      alert('ìë£Œ ë°˜ë ¤ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsWorking(false);
    }
  };

  // ê°€ì´ë“œ ì €ì¥
  const saveGuide = async () => {
    if (!selectedPost || !guideText.trim()) return;
    setIsWorking(true);
    try {
      await adminApi.updatePostKeywordsGuide(Number(selectedPost.id), {
        writing_guide: guideText,
        is_completed: true
      });
      await adminApi.updatePostStatus(selectedPost.post_id, 'guide_completed', 'ì–´ë“œë¯¼ ê°€ì´ë“œ ì œê³µ ì™„ë£Œ');
      alert('ê°€ì´ë“œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
      setActiveStep('ai-agent');
    } catch (error) {
      console.error('ê°€ì´ë“œ ì €ì¥ ì‹¤íŒ¨:', error);
      alert('ê°€ì´ë“œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsWorking(false);
    }
  };

  // AI ì—ì´ì „íŠ¸ ì‹¤í–‰
  const executeAIAgent = async () => {
    if (!selectedPost) return;
    setIsWorking(true);
    try {
      await adminApi.updatePostStatus(selectedPost.post_id, 'agent_processing', 'AI ì—ì´ì „íŠ¸ ì‹¤í–‰ ì‹œì‘');
      // ì‹¤ì œ AI ì—ì´ì „íŠ¸ ì‹¤í–‰ API í˜¸ì¶œ (í˜„ì¬ëŠ” ì‹œë®¬ë ˆì´ì…˜)
      setTimeout(async () => {
        try {
          await adminApi.updatePostStatus(selectedPost.post_id, 'agent_completed', 'AI ìƒì„± ì™„ë£Œ');
          alert('AI ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
          setActiveStep('result-review');
        } catch (error) {
          console.error('AI ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
        }
      }, 3000); // 3ì´ˆ ì‹œë®¬ë ˆì´ì…˜
    } catch (error) {
      console.error('AI ì—ì´ì „íŠ¸ ì‹¤í–‰ ì‹¤íŒ¨:', error);
      alert('AI ì—ì´ì „íŠ¸ ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      setIsWorking(false);
    }
  };

  // ê²°ê³¼ ìŠ¹ì¸
  const approveResult = async () => {
    if (!selectedPost) return;
    setIsWorking(true);
    try {
      await adminApi.updatePostStatus(selectedPost.post_id, 'admin_review', 'ì–´ë“œë¯¼ ê²€í†  ìŠ¹ì¸');
      alert('ê²°ê³¼ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
      setActiveStep('client-review');
    } catch (error) {
      console.error('ê²°ê³¼ ìŠ¹ì¸ ì‹¤íŒ¨:', error);
      alert('ê²°ê³¼ ìŠ¹ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsWorking(false);
    }
  };

  // ê²Œì‹œ ëŒ€ê¸° ì „í™˜
  const schedulePublish = async () => {
    if (!selectedPost || !publishDate) return;
    setIsWorking(true);
    try {
      const publishDateTime = publishTime ? `${publishDate}T${publishTime}` : `${publishDate}T09:00`;
      await adminApi.updatePostStatus(selectedPost.post_id, 'publish_scheduled', `ê²Œì‹œ ì¼ì • ì„¤ì •: ${publishDateTime}`);
      alert('ê²Œì‹œ ëŒ€ê¸°ë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
      setActiveStep('material-review');
      if (onPostSelect) onPostSelect(null);
    } catch (error) {
      console.error('ê²Œì‹œ ëŒ€ê¸° ì „í™˜ ì‹¤íŒ¨:', error);
      alert('ê²Œì‹œ ëŒ€ê¸° ì „í™˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsWorking(false);
    }
  };

  const getStatusLabel = (status: string) => {
    switch (status) {
      case 'initial': return 'ì´ˆê¸°';
      case 'material_completed': return 'ìë£Œ ì™„ë£Œ';
      case 'guide_completed': return 'ê°€ì´ë“œ ì™„ë£Œ';
      case 'agent_processing': return 'AI ì²˜ë¦¬ì¤‘';
      case 'agent_completed': return 'AI ì™„ë£Œ';
      case 'admin_review': return 'ì–´ë“œë¯¼ ê²€í† ';
      case 'client_review': return 'í´ë¼ì´ì–¸íŠ¸ ê²€í† ';
      case 'final_revision': return 'ìµœì¢… ìˆ˜ì •';
      case 'publish_scheduled': return 'ê²Œì‹œ ëŒ€ê¸°';
      default: return status;
    }
  };

  return (
    <div className="h-full bg-neutral-50 overflow-y-auto">
      <div className="p-6">
        {/* í—¤ë” */}
        <div className="mb-6">
          <h1 className="text-2xl font-bold text-neutral-900 mb-2">í¬ìŠ¤íŒ… ì‘ì—…</h1>
          <p className="text-neutral-600">ê°œë³„ í¬ìŠ¤íŠ¸ì— ëŒ€í•œ ìƒì„¸ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤</p>
        </div>

        <div className="grid grid-cols-12 gap-6">
          {/* í¬ìŠ¤íŠ¸ ëª©ë¡ */}
          <div className="col-span-4">
            <div className="bg-white rounded-xl shadow-lg p-4">
              <h2 className="text-lg font-semibold text-neutral-900 mb-4">ì‘ì—… ëŒ€ìƒ í¬ìŠ¤íŠ¸</h2>

              {isLoading ? (
                <div className="flex items-center justify-center py-8">
                  <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-neutral-600"></div>
                  <span className="ml-2 text-neutral-600">í¬ìŠ¤íŠ¸ ë¡œë”© ì¤‘...</span>
                </div>
              ) : posts.length === 0 ? (
                <div className="text-center py-8">
                  <div className="text-neutral-400 mb-2">
                    <i className="fa-solid fa-clipboard-list text-3xl"></i>
                  </div>
                  <p className="text-sm text-neutral-500">ì‘ì—…í•  í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                </div>
              ) : (
                <div className="space-y-3 max-h-96 overflow-y-auto">
                  {posts.map((post) => (
                    <div
                      key={post.id}
                      onClick={() => {
                        if (onPostSelect) onPostSelect(post);
                        setActiveStep('material-review');
                      }}
                      className={`p-3 rounded-lg border cursor-pointer transition-colors ${
                        selectedPost?.id === post.id
                          ? 'border-neutral-600 bg-neutral-50'
                          : 'border-neutral-200 hover:border-neutral-300'
                      }`}
                    >
                      <div className="flex items-start justify-between mb-2">
                        <span className="text-xs text-neutral-600 bg-neutral-100 px-2 py-1 rounded">
                          {post.post_id}
                        </span>
                        <span className={`text-xs px-2 py-1 rounded ${getStatusColor(post.status)}`}>
                          {getStatusLabel(post.status)}
                        </span>
                      </div>
                      <h4 className="text-sm text-neutral-800 mb-1 line-clamp-2">{post.title}</h4>
                      <p className="text-xs text-neutral-500">
                        {post.post_type === 'informational' ? 'ì •ë³´ì„±' : 'ì¹˜ë£Œì‚¬ë¡€'}
                      </p>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* ì‘ì—… ìƒì„¸ */}
          <div className="col-span-8">
            {selectedPost ? (
              <div className="bg-white rounded-xl shadow-lg p-6">
                {/* í¬ìŠ¤íŠ¸ ì •ë³´ */}
                <div className="mb-6 pb-4 border-b border-neutral-200">
                  <div className="flex items-start justify-between">
                    <div>
                      <h2 className="text-xl font-bold text-neutral-900 mb-2">{selectedPost.title}</h2>
                      <div className="flex items-center space-x-4 text-sm text-neutral-600">
                        <span>í¬ìŠ¤íŠ¸ ID: {selectedPost.post_id}</span>
                        <span>ìœ í˜•: {selectedPost.post_type === 'informational' ? 'ì •ë³´ì„±' : 'ì¹˜ë£Œì‚¬ë¡€'}</span>
                        <span>ìƒì„±ì: {selectedPost.creator_name || 'ë¯¸ì •'}</span>
                      </div>
                    </div>
                    <span className={`px-3 py-1 rounded-full text-sm ${getStatusColor(selectedPost.status)}`}>
                      {getStatusLabel(selectedPost.status)}
                    </span>
                  </div>
                </div>

                {/* ì‘ì—… ë‹¨ê³„ */}
                <div className="mb-6">
                  <h3 className="text-lg font-semibold text-neutral-900 mb-4">ì‘ì—… ì§„í–‰ ë‹¨ê³„</h3>
                  <div className="grid grid-cols-6 gap-4">
                    {steps.map((step, index) => (
                      <button
                        key={step.id}
                        onClick={() => setActiveStep(step.id)}
                        className={`p-3 rounded-lg border-2 transition-all text-center ${
                          activeStep === step.id
                            ? 'border-neutral-600 bg-neutral-50'
                            : 'border-neutral-200 hover:border-neutral-300'
                        }`}
                      >
                        <div className="text-2xl mb-2">{step.icon}</div>
                        <div className="text-xs font-medium text-neutral-700">{step.label}</div>
                      </button>
                    ))}
                  </div>
                </div>

                {/* ì‘ì—… ì½˜í…ì¸  */}
                <div className="bg-neutral-50 rounded-lg p-6">
                  <h4 className="text-lg font-semibold text-neutral-900 mb-4">
                    {steps.find(s => s.id === activeStep)?.label}
                  </h4>

                  {activeStep === 'material-review' && (
                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-lg border border-neutral-200">
                        <h5 className="font-medium text-neutral-900 mb-2">ê³ ê° ì œê³µ ìë£Œ ê²€í† </h5>
                        <div className="space-y-2">
                          <div className="flex items-center justify-between p-3 bg-neutral-50 rounded">
                            <span className="text-sm">ìë£Œ ì œê³µ ìƒíƒœ</span>
                            <span className="text-sm font-medium text-green-600">ì™„ë£Œë¨</span>
                          </div>
                          <div className="flex items-center justify-between p-3 bg-neutral-50 rounded">
                            <span className="text-sm">ìë£Œ í’ˆì§ˆ</span>
                            <span className="text-sm font-medium text-blue-600">ì–‘í˜¸</span>
                          </div>
                        </div>
                        <div className="mt-4 flex space-x-2">
                          <button
                            onClick={approveMaterials}
                            disabled={isWorking}
                            className="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì²˜ë¦¬ì¤‘...' : 'ìŠ¹ì¸'}
                          </button>
                          <button
                            onClick={rejectMaterials}
                            disabled={isWorking}
                            className="px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì²˜ë¦¬ì¤‘...' : 'ë°˜ë ¤'}
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {activeStep === 'admin-guide' && (
                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-lg border border-neutral-200">
                        <h5 className="font-medium text-neutral-900 mb-2">ì–´ë“œë¯¼ ê°€ì´ë“œ ì œê³µ</h5>
                        <textarea
                          value={guideText}
                          onChange={(e) => setGuideText(e.target.value)}
                          className="w-full h-32 p-3 border border-neutral-300 rounded resize-none"
                          placeholder="AI ì—ì´ì „íŠ¸ì—ê²Œ ì œê³µí•  ê°€ì´ë“œ ë° ì§€ì¹¨ì„ ì‘ì„±í•˜ì„¸ìš”..."
                        ></textarea>
                        <div className="mt-4 flex space-x-2">
                          <button
                            onClick={saveGuide}
                            disabled={isWorking || !guideText.trim()}
                            className="px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì €ì¥ì¤‘...' : 'ê°€ì´ë“œ ì €ì¥'}
                          </button>
                          <button
                            onClick={() => setActiveStep('ai-agent')}
                            className="px-4 py-2 bg-neutral-600 text-white text-sm rounded hover:bg-neutral-700"
                          >
                            ë‹¤ìŒ ë‹¨ê³„
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {activeStep === 'ai-agent' && (
                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-lg border border-neutral-200">
                        <h5 className="font-medium text-neutral-900 mb-2">AI ì—ì´ì „íŠ¸ ì‹¤í–‰</h5>
                        <div className="space-y-3">
                          <div className="flex items-center justify-between p-3 bg-neutral-50 rounded">
                            <span className="text-sm">AI ì²˜ë¦¬ ìƒíƒœ</span>
                            <span className="text-sm font-medium text-yellow-600">ì²˜ë¦¬ì¤‘</span>
                          </div>
                          <div className="bg-neutral-100 p-3 rounded">
                            <div className="text-sm text-neutral-600 mb-2">ì§„í–‰ ìƒí™©:</div>
                            <div className="w-full bg-neutral-200 rounded-full h-2">
                              <div className="bg-blue-600 h-2 rounded-full" style={{width: '60%'}}></div>
                            </div>
                            <div className="text-xs text-neutral-500 mt-1">60% ì™„ë£Œ</div>
                          </div>
                        </div>
                        <div className="mt-4 flex space-x-2">
                          <button
                            onClick={() => setActiveStep('result-review')}
                            className="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700"
                          >
                            ê²°ê³¼ ê²€í† 
                          </button>
                          <button
                            onClick={executeAIAgent}
                            disabled={isWorking}
                            className="px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì‹¤í–‰ì¤‘...' : 'ì¬ì‹¤í–‰'}
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {activeStep === 'result-review' && (
                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-lg border border-neutral-200">
                        <h5 className="font-medium text-neutral-900 mb-2">AI ìƒì„± ê²°ê³¼ ê²€í† </h5>
                        <div className="bg-neutral-50 p-4 rounded mb-4">
                          <div className="text-sm text-neutral-600 mb-2">ìƒì„±ëœ ì½˜í…ì¸  ë¯¸ë¦¬ë³´ê¸°:</div>
                          <div className="bg-white p-3 rounded border text-sm">
                            AI ì—ì´ì „íŠ¸ê°€ ìƒì„±í•œ ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...
                          </div>
                        </div>
                        <div className="flex space-x-2">
                          <button
                            onClick={approveResult}
                            disabled={isWorking}
                            className="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì²˜ë¦¬ì¤‘...' : 'ìŠ¹ì¸'}
                          </button>
                          <button
                            onClick={() => setActiveStep('admin-guide')}
                            className="px-4 py-2 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700"
                          >
                            ìˆ˜ì • ìš”ì²­
                          </button>
                          <button
                            onClick={executeAIAgent}
                            disabled={isWorking}
                            className="px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì¬ìƒì„±ì¤‘...' : 'ì¬ìƒì„±'}
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {activeStep === 'client-review' && (
                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-lg border border-neutral-200">
                        <h5 className="font-medium text-neutral-900 mb-2">í´ë¼ì´ì–¸íŠ¸ ê²€í†  ë° í”¼ë“œë°± ë°˜ì˜</h5>
                        <div className="space-y-3">
                          <div className="flex items-center justify-between p-3 bg-neutral-50 rounded">
                            <span className="text-sm">í´ë¼ì´ì–¸íŠ¸ ê²€í†  ìƒíƒœ</span>
                            <span className="text-sm font-medium text-orange-600">ëŒ€ê¸°ì¤‘</span>
                          </div>
                          <div className="bg-neutral-50 p-3 rounded">
                            <div className="text-sm text-neutral-600 mb-2">í´ë¼ì´ì–¸íŠ¸ í”¼ë“œë°±:</div>
                            <div className="text-sm text-neutral-700">
                              "ì œëª©ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ë°”ê¿”ì£¼ì„¸ìš”..."
                            </div>
                          </div>
                        </div>
                        <div className="mt-4 flex space-x-2">
                          <button
                            onClick={() => setActiveStep('result-review')}
                            className="px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700"
                          >
                            í”¼ë“œë°± ë°˜ì˜
                          </button>
                          <button
                            onClick={() => setActiveStep('publish-ready')}
                            className="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700"
                          >
                            ê²€í†  ì™„ë£Œ
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {activeStep === 'publish-ready' && (
                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-lg border border-neutral-200">
                        <h5 className="font-medium text-neutral-900 mb-2">ê²Œì‹œ ëŒ€ê¸° ìƒíƒœ ì „í™˜</h5>
                        <div className="space-y-3">
                          <div className="grid grid-cols-2 gap-4">
                            <div>
                              <label className="block text-sm font-medium text-neutral-700 mb-1">
                                ê²Œì‹œ ì˜ˆì •ì¼
                              </label>
                              <input
                                type="date"
                                value={publishDate}
                                onChange={(e) => setPublishDate(e.target.value)}
                                className="w-full p-2 border border-neutral-300 rounded"
                              />
                            </div>
                            <div>
                              <label className="block text-sm font-medium text-neutral-700 mb-1">
                                ê²Œì‹œ ì˜ˆì •ì‹œê°„
                              </label>
                              <input
                                type="time"
                                value={publishTime}
                                onChange={(e) => setPublishTime(e.target.value)}
                                className="w-full p-2 border border-neutral-300 rounded"
                              />
                            </div>
                          </div>
                          <div className="flex items-center p-3 bg-green-50 rounded">
                            <div className="text-sm text-green-700">
                              âœ… ëª¨ë“  ê²€í†  ê³¼ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê²Œì‹œë¥¼ ìœ„í•œ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
                            </div>
                          </div>
                        </div>
                        <div className="mt-4 flex space-x-2">
                          <button
                            onClick={schedulePublish}
                            disabled={isWorking || !publishDate}
                            className="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
                          >
                            {isWorking ? 'ì „í™˜ì¤‘...' : 'ê²Œì‹œ ëŒ€ê¸°ë¡œ ì „í™˜'}
                          </button>
                          <button
                            onClick={() => setActiveStep('client-review')}
                            className="px-4 py-2 bg-neutral-600 text-white text-sm rounded hover:bg-neutral-700"
                          >
                            ì·¨ì†Œ
                          </button>
                        </div>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            ) : (
              <div className="bg-white rounded-xl shadow-lg p-12 text-center">
                <div className="text-neutral-400 mb-4">
                  <i className="fa-solid fa-hand-pointer text-4xl"></i>
                </div>
                <h3 className="text-lg font-medium text-neutral-900 mb-2">í¬ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”</h3>
                <p className="text-neutral-600">ì™¼ìª½ ëª©ë¡ì—ì„œ ì‘ì—…í•  í¬ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}
